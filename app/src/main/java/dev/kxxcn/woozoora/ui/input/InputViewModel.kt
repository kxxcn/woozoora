package dev.kxxcn.woozoora.ui.inputimport androidx.lifecycle.LiveDataimport androidx.lifecycle.MutableLiveDataimport dev.kxxcn.woozoora.common.Eventimport dev.kxxcn.woozoora.ui.base.BaseViewModelimport dev.kxxcn.woozoora.ui.edit.EditFilterTypeclass InputViewModel : BaseViewModel() {    var currentFilterType: EditFilterType? = null    val editText = MutableLiveData<String>()    val priceText = MutableLiveData<String>()    private val _inputEvent = MutableLiveData<Event<String?>>()    val inputEvent: LiveData<Event<String?>> = _inputEvent    fun start(requestType: EditFilterType?, content: String?) {        setFiltering(requestType)        forceUpdate(content)    }    fun emitAndClose() {        emit()        hideAndClose()    }    fun onKey(number: String) {        val target = priceText.value            .takeUnless { it?.isEmpty() == true && (number == "0" || number == "00") }            ?: return        val result = target.plus(number)        priceText.value = result    }    fun onRemove() {        val target = priceText.value            .takeIf { it?.isNotEmpty() == true }            ?: return        priceText.value = target.dropLast(1)    }    private fun forceUpdate(content: String?) {        mutableDataByFilterType().value = content    }    private fun setFiltering(requestType: EditFilterType?) {        currentFilterType = requestType    }    private fun emit() {        val content = mutableDataByFilterType().value        _inputEvent.value = Event(content)    }    private fun mutableDataByFilterType(): MutableLiveData<String> {        return when (currentFilterType) {            EditFilterType.PRICE -> priceText            else -> editText        }    }}